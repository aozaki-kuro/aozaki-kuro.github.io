<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN"><title type="text">Aozaki's Note</title><subtitle type="html">Aozaki Kuro's Notes, take it easy.</subtitle><updated>2020-08-12T13:21:18+00:00</updated><id>https://aozaki-kuro.com/</id><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/"/><link rel="self" type="application/atom+xml" href="https://aozaki-kuro.com/atom.xml"/><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><generator uri="https://gohugo.io/" version="0.74.3">Hugo</generator><entry><title type="text">浅尝Cloudflare Workers部署静态博客</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/tech/2020-08-12-cloudflare-workers/"/><id>https://aozaki-kuro.com/tech/2020-08-12-cloudflare-workers/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-12T11:05:50+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">想到迁移到Cloudflare Workers的原因是看到了苏卡卡对博客速度进一步优化……</summary><content type="html">&lt;p>想到迁移到Cloudflare Workers的原因是看到了苏卡卡&lt;a href="https://blog.skk.moe/post/deploy-blog-to-cf-workers-site/">&lt;strong>对博客速度进一步优化的文章&lt;/strong>&lt;/a>，觉得Cloudflare Workers这样的Serverless服务非常的酷，而且在短暂的部署尝试中我就感觉到快。&lt;/p>
&lt;p>然而迁移后验证了朋友的说法，用用可以，但是把生产环境放上去还是算了。因此总体算是一次不太成功的尝试。由于我没有进一步排障和优化的能力，只能记录一下踩坑记录。&lt;/p>
&lt;p>一句话总结：部署时撞到的坑非常非常多，可能比我部署Hugo时遇到的坑还要多。&lt;/p>
&lt;h2 id="坑1wrangler需配置用户">坑1：Wrangler需配置用户&lt;/h2>
&lt;p>我是利用Github Actions对博客更新进行CI，仅仅是这一步已经出现了大量的bug。&lt;/p>
&lt;p>若要部署至Cloudflare Workers，需要应用Wrangler CLI进行部署。本地添加配置、如何填写相关项目可以继续参考&lt;a href="https://blog.skk.moe/post/deploy-blog-to-cf-workers-site/">&lt;strong>苏卡卡的文章&lt;/strong>&lt;/a>&lt;/p>
&lt;p>然而在Github Actions库中&lt;code>cloudflare/wrangler-action@1.2.0&lt;/code>，执行时直接报错，查看信息发现&lt;code>could not determine the current user wrangler&lt;/code>，考虑需要定义&lt;code>$USER&lt;/code>，查看&lt;a href="https://github.com/cloudflare/wrangler-action/issues/12">&lt;strong>社区讨论&lt;/strong>&lt;/a>后发现修改配置文件。&lt;/p>
&lt;p>&lt;del>修改配置文件时感受到了来自yml深深的恶意&lt;/del>&lt;/p>
&lt;p>最终配置文件如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Hugo&lt;span class="w"> &lt;/span>Build&lt;span class="w"> &lt;/span>and&lt;span class="w"> &lt;/span>Deploy&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- master&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">build-deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ubuntu-latest&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/checkout@v1&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Setup&lt;span class="w"> &lt;/span>Hugo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>peaceiris/actions-hugo@v2&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>latest&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Build&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>hugo&lt;span class="w"> &lt;/span>--gc&lt;span class="w"> &lt;/span>--minify&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Deploy&lt;span class="w"> &lt;/span>to&lt;span class="w"> &lt;/span>Cloudflare&lt;span class="w"> &lt;/span>Workers&lt;span class="w"> &lt;/span>with&lt;span class="w"> &lt;/span>Wrangler&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>cloudflare/wrangler-action@&lt;span class="m">1.2.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>root&lt;span class="w"> &lt;/span>&lt;span class="c"># 非常重要！必须定义&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Your Cloudflare API Token&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">apiToken&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.CLOUDFLARE_TOKEN&lt;span class="w"> &lt;/span>}}&lt;span class="w"> &lt;/span>&lt;span class="c"># 输入你自己定义的secret名称&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="坑2配置完workers后需要填写dns记录">坑2：配置完Workers后需要填写DNS记录&lt;/h2>
&lt;p>这一点是个坑，几乎所有的教程都没有提到这里该怎么填。最后是从Cloudflare Community上翻到的答案（&lt;a href="https://community.cloudflare.com/t/setup-workers-on-personal-domain/88012/7">具体讨论点这里&lt;/a>）。&lt;/p>
&lt;p>在指定router后（例如我的是指向&lt;code>dev.aozaki-kuro.com/*&lt;/code>），只需要在DNS记录内添加一个&lt;code>A&lt;/code>记录，指向一个空IP即可。&lt;/p>
&lt;p>这个空IP可以是&lt;code>192.0.2.1&lt;/code>以及类似的空IP。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-12-cloudflare-workers/0001.jpg" alt="0001" title="其实就这么简单，但是连官方文档都没写，大部分教程也没写">&lt;/p>
&lt;h2 id="坑3不支持中文路径">坑3：不支持中文路径&lt;/h2>
&lt;p>尽管苏卡卡在博客中提到了对中文路径的解决，发现也Github上也merge了，但是实际部署后还是无法对&lt;code>/测试/index.html&lt;/code>这样的路径进行路由。意味着需要放弃博客内对整个中文tags的聚合。这一点是不太能接受的，也是不再继续用下去的原因。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Cloudflare Workers仅仅是部署就已经出现了这样那样的坑，官方文档只有简单几行字，很多操作细节根本没有，还别提部署上去后效果也并不是那么理想…………&lt;/p>
&lt;p>目前保留了指向Cloudflare Workers的链接，但是不再CI上去，可以参观一下：&lt;/p>
&lt;p>&lt;a href="https://dev.aozaki-kuro.com/">https://dev.aozaki-kuro.com/&lt;/a>&lt;/p>
&lt;p>&lt;code>Expire date: 2020-09-11&lt;/code>&lt;/p>
&lt;p>总之是个坑.jpg&lt;/p></content><category scheme="https://aozaki-kuro.com/tech/" term="tech" label="tech"/><category scheme="https://aozaki-kuro.com/tags/%E6%8A%98%E8%85%BE/" term="折腾" label="折腾"/><category scheme="https://aozaki-kuro.com/tags/%E7%BD%91%E7%BB%9C/" term="网络" label="网络"/></entry><entry><title type="text">本地图片库的整理思路</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/tech/2020-08-11-picture-storage/"/><id>https://aozaki-kuro.com/tech/2020-08-11-picture-storage/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-11T12:21:47+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">WARNING！本文部分内容建议18岁以上阅读。 上个月把自己的本地图库给重构了一次，……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-11-picture-storage/0004.jpg" alt="0004.jpg">&lt;/p>
&lt;p>&lt;strong>&lt;div style="text-align: center;">
WARNING！本文部分内容建议18岁以上阅读。
&lt;/div>&lt;/strong>&lt;/p>
&lt;p>&lt;br>&lt;br>
上个月把自己的本地图库给重构了一次，稍微缓解了某些文件夹乱如&lt;code>node_modules&lt;/code>的处境&lt;span class="spoiler" >让色图整理变得伟大！&lt;/span>&lt;/p>
&lt;h2 id="发现问题">发现问题&lt;/h2>
&lt;p>事情的起因其实是根据Pockies的教程将自己的视频库&lt;span class="spoiler" >爱情动作片库&lt;/span>进行了一次整理，并且搭建起了基于群晖的Plex视频库。&lt;/p>
&lt;p>感兴趣的读者可以 &lt;strong>&lt;a href="https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/">点击这里&lt;/a>&lt;/strong> 学习如何整理。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-11-picture-storage/0002.jpg" alt="0002.jpg" title="嗯，很整齐，很美观，满足强迫症和整理癖的需求">&lt;/p>
&lt;p>然而当我点开放置Pixiv Downloader批量拖下来的图片库时…我就感到不适。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-11-picture-storage/0001.jpg" alt="0001.jpg" title="这就是我的感受">&lt;/p>
&lt;p>由于整个图库文件夹实在过于积重难返，加上出现了用Resilo Sync在多台电脑之间选择性同步的需求，遂下定决心将图库文件夹进行一次重构。&lt;/p>
&lt;h2 id="提出假设">提出假设&lt;/h2>
&lt;h3 id="通过tags分类">通过tags分类？&lt;/h3>
&lt;p>目前互联网上最优秀的图库应当属于Booru站点，作为代表的当然是Danbooru以及Yande.re。&lt;/p>
&lt;p>Booru站点的优势在于拥有强大的&lt;code>tags&lt;/code>功能，不仅可以对图片的作者进行标记，且可以通过大量用户编辑的&lt;code>tags&lt;/code>对&lt;del>性癖&lt;/del>进行分类。&lt;/p>
&lt;p>原先的构想也是基于&lt;code>tags&lt;/code>，以作者为文件夹单位，进行图库的整理。但是发现&lt;code>tags&lt;/code>的交叉太多，并且不可能一张张手动进行标记。此外也不想把一张图片复制到多个文件夹下（这和&lt;code>node_modules&lt;/code>有什么区别）。&lt;/p>
&lt;p>如果说能把Plex的优点（服务端获取额外刮削信息并展示）和Booru的优点（大量&lt;code>tags&lt;/code>信息）结合起来就好了，但我不会写爬虫。此外还有一个难点：如何让本地图片和云端对应起来？图片可能来源于Twitter、Pixiv、fanbox、patreon等等网站，甚至是其他booru图站；极端情况下文件名丢失，对应难度直线上升。&lt;/p>
&lt;p>基于以上理由，暂不考虑&lt;code>tags&lt;/code>分类法。&lt;/p>
&lt;h3 id="仅以作者进行分类">仅以作者进行分类？&lt;/h3>
&lt;p>这个其实是最暴力的方式。因为我本地部署了&lt;code>Listary&lt;/code>和&lt;code>Everything&lt;/code>进行索引和搜素服务，所以仅仅对作者进行搜索是不成问题了。&lt;/p>
&lt;p>但是在开篇就已经说过了，Pixiv Downloader下载堆积出来的混乱文件夹令我只有把文件夹关掉的冲动，所以否决。&lt;/p>
&lt;p>最大的问题还是在于图片的数量和来源非常杂乱，不像爱情动作片可以从DMM.co.jp等站点拉取标准化的信息并进行分类。&lt;/p>
&lt;h3 id="应用软件">应用软件？&lt;/h3>
&lt;p>备选方案有Eagle和Lightroom，以及本地看图的XnView。&lt;/p>
&lt;p>这些软件均拥有类似于&lt;code>tags&lt;/code>的功能，但是前者很“重”，而且是付费软件，尽管我有Lightroom的订阅，但因其不能兼顾移动端而放弃。XnView更不必说了，同样是不能兼容移动端，所以最后决定细化文件夹结构以解决部分问题、满足需求。&lt;/p>
&lt;h2 id="解决问题">解决问题&lt;/h2>
&lt;p>那么最终怎么解决呢？我选择了并轨制。&lt;/p>
&lt;p>事先说明：这是一个基于主观判断的整理方式，并不一定适合所有人。&lt;/p>
&lt;h3 id="最终的文件夹结构">最终的文件夹结构&lt;/h3>
&lt;p>尽管分类和分层变多了，但尽可能结合了&lt;code>tags&lt;/code>的便捷，并最大程度利用了Pixiv Downloader的文件结构有助于检索。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">图库
│
│
├────图片
│ │
│ ├────Artist
│ │ ├───Paid Contents &lt;span class="c1">#故名思义&lt;/span>
│ │ │ ├────xxx
│ │ │ │ └──xxx_fanbox &lt;span class="c1">#添加来源&lt;/span>
│ │ │ └────yyy &lt;span class="c1">#下略&lt;/span>
│ │ │
│ │ ├───★★★★★ &lt;span class="c1">#根据星级分层&lt;/span>
│ │ ├───★★★★
│ │ ├───★★★
│ │ └───Unsorted &lt;span class="c1">#用作批量下载的缓冲区，尽快解决吧…&lt;/span>
│ │
│ ├────Fetish &lt;span class="c1">#故名思义&lt;/span>
│ │ ├───xxx
│ │ └───yyy
│ │
│ ├────Title &lt;span class="c1">#根据不同的作品（游戏、动画等安放）&lt;/span>
│ │ ├───xxx
│ │ └───yyy
│ │
│ ├────Vtuber &lt;span class="c1">#根据不同的Vtuber进行分类&lt;/span>
│ │ ├───xxx
│ │ │ └──xxx_R18 &lt;span class="c1">#便于检索，下略&lt;/span>
│ │ └───yyy
│ │
│ └────Unsorted &lt;span class="c1">#总有些无处安放的图&lt;/span>
│
├────照片 &lt;span class="c1">#自己拍摄的照片&lt;/span>
│ ├───人像
│ ├───风景
│ └───其他
│
└────壁纸
├───5K Wallpapers
├───2K Wallpapers
└───iPhone Wallpapers
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="aritist文件夹">Aritist文件夹&lt;/h3>
&lt;p>主要形式是&lt;code>&amp;quot;userName&amp;quot; (&amp;quot;pixivID&amp;quot;)&lt;/code>的形式，例如&lt;code>米山舞 (1554775)&lt;/code>，这一部分可手动创建，或通过Pixiv Downloader进行定义。&lt;/p>
&lt;p>我的Pixiv Download参数设定如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">PxDownloader/&lt;span class="si">${&lt;/span>&lt;span class="nv">userName&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">)&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>_p0 &lt;span class="c1">#单一档案用&lt;/span>
PxDownloader/&lt;span class="si">${&lt;/span>&lt;span class="nv">userName&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">)&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>_p&lt;span class="si">${&lt;/span>&lt;span class="nv">page&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1">#复数档案&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="将部分文件夹内文件名序列化">将部分文件夹内文件名序列化&lt;/h3>
&lt;p>主要是Paid Contents这一部分来源非常乱：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Patreon上部分作者会提供当期奖励打包，但很多需要自己右键保存&lt;/p>
&lt;/li>
&lt;li>
&lt;p>fanbox的图片命名是无序的，直接下载后放入图库会出现非常大的混乱&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有些时候连&lt;code>jpg&lt;/code>文件后缀也是&lt;code>jpeg&lt;/code>，强迫症非常不适&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>这么多问题，一个个手动就很蛋疼。于是我采用了&lt;code>ReNamer&lt;/code>，进行批量序列化的操作。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-11-picture-storage/0003.jpg" alt="0003.jpg">&lt;/p>
&lt;blockquote>
&lt;p>1.程序界面与结果预览；2.删除扩展名以外的文件名；&lt;/p>
&lt;p>3.序列化并补足四位数；4.将所有的扩展名统一。&lt;/p>
&lt;/blockquote>
&lt;p>最后可以获得&lt;code>0001.jpg&lt;/code>起的令人舒适的文件夹内容。&lt;/p>
&lt;h2 id="问题解决了吗">问题解决了吗？&lt;/h2>
&lt;p>问题解决了一部分&lt;/p>
&lt;ol>
&lt;li>
&lt;p>细化文件夹结构，在直接文件夹内浏览时以少许速度为牺牲，提升了准确度&lt;/p>
&lt;/li>
&lt;li>
&lt;p>解决了Unsorted缓冲区堆积过多却不知道向哪里分流的问题&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对于&lt;code>Listary&lt;/code>以及&lt;code>Everything&lt;/code>的影响较少&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>没有解决的问题：&lt;strong>针对文件直接添加&lt;/strong>&lt;code>tags&lt;/code>。&lt;/p>
&lt;p>还是如同前文所说，&lt;code>tags&lt;/code>尽管可以最大程度细化分类、精准搜索图片，但是需要大量编辑人员进行添加，个人用户不可能做到这么精细。&lt;/p>
&lt;p>另外，基于&lt;code>tags&lt;/code>的文件浏览器的缺乏，以及数据共通的难度。e.g. XnView尽管拥有类似&lt;code>tags&lt;/code>的系统，但是无法和iOS进行数据共通。&lt;/p>
&lt;p>所以最后放弃了&lt;code>tags&lt;/code>分类的想法。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>重构图库的结果是并轨制，以少量文件夹浏览速度为牺牲，提升了准确度。&lt;/p>
&lt;p>如果有能够结合Booru和Plex的优秀的&lt;code>tags&lt;/code>管理方法，请务必告诉我。&lt;/p></content><category scheme="https://aozaki-kuro.com/tech/" term="tech" label="tech"/><category scheme="https://aozaki-kuro.com/tags/%E6%8A%98%E8%85%BE/" term="折腾" label="折腾"/><category scheme="https://aozaki-kuro.com/tags/%E5%BC%BA%E8%BF%AB%E7%97%87/" term="强迫症" label="强迫症"/><category scheme="https://aozaki-kuro.com/tags/%E6%95%B4%E7%90%86%E7%99%96/" term="整理癖" label="整理癖"/><category scheme="https://aozaki-kuro.com/tags/%E4%BB%93%E9%BC%A0%E7%97%87%E6%82%A3%E8%80%85/" term="仓鼠症患者" label="仓鼠症患者"/></entry><entry><title type="text">人性 #1 左右为难</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/humanity/0001/"/><id>https://aozaki-kuro.com/humanity/0001/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-11T09:39:50+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">这是我在肿瘤科时遇到的老病人，胃癌患者，五十多岁的美籍华人，总病程一年多，来院打化疗……</summary><content type="html">&lt;p>这是我在肿瘤科时遇到的老病人，胃癌患者，五十多岁的美籍华人，总病程一年多，来院打化疗。&lt;/p>
&lt;p>晚上值班的时候，患者一脸愁眉苦脸地来找我倒苦水，平时我一般不太接这些话茬，但看着他形单影只的样子，加之肿瘤患者的心理疏导重要，我就坐下来听了。&lt;/p>
&lt;p>这位患者，就叫他老刘吧，胃癌术后化疗，尽管是维持化疗，用的方案还挺贵的。出于好奇，我问了问他为什么会选择在国内全自费打化疗。老刘说，他是美籍华人，在中国有充足的医疗资料就可以回美国通过商业保险报销，所以近一年都会在中美之间往返，加之在上海也有一套不错的房子，就当是旅行以及看看再国内的亲戚朋友了。&lt;/p>
&lt;p>但是岁数上去了，加上化疗对身体伤害多少还是比较大的，老刘觉得一个人整天在中美之间坐飞机往返渐渐吃力，准备把国内刚精装修完的房子卖了，回美国继续做化疗。&lt;/p>
&lt;p>何曾想到，2020年初的新冠疫情把这一计划彻底打乱。&lt;/p>
&lt;p>3月的时候中美航班票价格且不说，疫情严重期间根本一票难求，老刘因此被困在的上海。雪上加霜的是，..老刘已经把房子卖了出去..。新房主是一位年轻女性，当老刘跟新房主商量能否再住一段时间时，新房主..一口拒绝..，并且要求老刘按当地租房价..租住..。老刘的房子在上海的黄金地段，可想而知租金到底有多贵。而且疫情遥遥无期，中美关系持续僵局，什么时候能回美国都是一个大问题。&lt;/p>
&lt;p>作为医生，我也无法帮老刘解决这些问题，老刘也只是苦笑了一下，跟我说：&lt;/p>
&lt;p>“没事的医生，你能听我把这些事讲完，我就很感激了。”&lt;/p>
&lt;p>老刘打完化疗那天拿着包离开时的背影，仿佛老了十几岁。&lt;/p>
&lt;hr>
&lt;p>&lt;strong>Copyright © 2020 Aozaki Kuro, All Rights Reserved.&lt;/strong>&lt;/p></content><category scheme="https://aozaki-kuro.com/humanity/" term="humanity" label="humanity"/><category scheme="https://aozaki-kuro.com/tags/%E4%BA%BA%E6%80%A7/" term="人性" label="人性"/><category scheme="https://aozaki-kuro.com/tags/%E9%9A%8F%E7%AC%94/" term="随笔" label="随笔"/></entry><entry><title type="text">人性 #0 序言</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/humanity/0000/"/><id>https://aozaki-kuro.com/humanity/0000/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-11T09:36:07+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">从前就想过，是否可以把行医路上碰到的各种有关人性的小故事集合起来，以半纪实半虚构的形……</summary><content type="html">&lt;p>从前就想过，是否可以把行医路上碰到的各种有关人性的小故事集合起来，以半纪实半虚构的形式重新讲述。&lt;/p>
&lt;p>先前没有什么时间，加之没有平台，现在建立了这样一个博客，便觉得可以安心创作。&lt;/p>
&lt;p>这些故事均来自于我三年轮转期间，乘着还没有忘记，尽量把它们记录下来；&lt;/p>
&lt;p>这些故事背后也是一个个家庭的悲欢离合，加之隐私问题，所以会有虚构的部分，不会出现任何真实信息。&lt;/p>
&lt;p>也许还会夹杂一些科普？有时间回原来医院的话还可以考虑把病例资料导出来一部分做成病例讨论……&lt;/p>
&lt;p>总之这几日即将开始更新，希望大家喜欢。&lt;/p>
&lt;hr>
&lt;p>&lt;strong>本栏目禁止随意转载，不适用本站全局的CC BY-NC-SA 4.0条款。&lt;/strong>&lt;/p>
&lt;p>如需转载请联系&lt;a href="mailto:Aozaki.Kuro@gmail.com">Aozaki.Kuro@Gmail.com&lt;/a>，谢谢合作。&lt;/p></content><category scheme="https://aozaki-kuro.com/humanity/" term="humanity" label="humanity"/><category scheme="https://aozaki-kuro.com/tags/%E4%BA%BA%E6%80%A7/" term="人性" label="人性"/><category scheme="https://aozaki-kuro.com/tags/%E9%9A%8F%E7%AC%94/" term="随笔" label="随笔"/></entry><entry><title type="text">利用Github Action自动化部署Hugo</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/tech/2020-08-10-github-action/"/><id>https://aozaki-kuro.com/tech/2020-08-10-github-action/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-10T18:04:51+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-10-github-action/0001.jpg" alt="">&lt;/p>
&lt;p>先前抱怨过Hugo本地编译再&lt;code>git push&lt;/code>至远端的操作过于繁琐，今天发现可以通过Github Action实现对Hugo的自动化部署并实践成功，故记录折腾过程。&lt;/p>……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-10-github-action/0001.jpg" alt="">&lt;/p>
&lt;p>先前抱怨过Hugo本地编译再&lt;code>git push&lt;/code>至远端的操作过于繁琐，今天发现可以通过Github Action实现对Hugo的自动化部署并实践成功，故记录折腾过程。&lt;/p>
&lt;p>此处应有 从各种意义上来讲这玩意太他妈邪门.jpg&lt;/p>
&lt;p>总之因为各种教程都有点语焉不详，于是还是自己把傻瓜化的过程记录下来得了。&lt;/p>
&lt;h2 id="建立新respiratory放置博客源文件">建立新Respiratory放置博客源文件&lt;/h2>
&lt;span class="spoiler" >竟然把Repository（资料库）拼成Respiratory（呼吸道）了，丢人&lt;/span>
&lt;p>这一步不用说吧，新建后将所有文件添加至新repo里（我用Github Desktop上传的），然后准备进行下一步操作。&lt;/p>
&lt;h2 id="通过github-actions进行自动部署">通过Github Actions进行自动部署&lt;/h2>
&lt;p>在本地新生成用于两个repo间通讯的SSH KEY&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">ssh-keygen -tecdsa
cat ~/.ssh/id_ecdsa.pub &lt;span class="c1">#获取公钥&lt;/span>
cat ~/.ssh/id_ecdsa. &lt;span class="c1"># 获取私钥&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加私钥的方法如下
&lt;img src="https://aozaki-kuro.com/tech/2020-08-10-github-action/0004.jpg" alt="">
&lt;img src="https://aozaki-kuro.com/tech/2020-08-10-github-action/0005.jpg" alt="">
此处因我的私钥变量名定为&lt;code>ACTIONS_DEPLOY_KEY&lt;/code>，故填写相应名称。&lt;/p>
&lt;p>在放置博客源文件的repo里，在Actions中建立Workflow
&lt;img src="https://aozaki-kuro.com/tech/2020-08-10-github-action/0006.jpg" alt="">&lt;/p>
&lt;p>我的build.yml文件如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Hugo&lt;span class="w"> &lt;/span>Build&lt;span class="w"> &lt;/span>and&lt;span class="w"> &lt;/span>Deploy&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- master&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">build-deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ubuntu-latest&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>actions/checkout@v1&lt;span class="w"> &lt;/span>&lt;span class="c"># v2 does not have submodules option now&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Setup&lt;span class="w"> &lt;/span>Hugo&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>peaceiris/actions-hugo@v2&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>latest&lt;span class="w"> &lt;/span>&lt;span class="c"># 应用最新的hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 我的主题需要应用hugo-extende&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Build&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>hugo&lt;span class="w"> &lt;/span>--gc&lt;span class="w"> &lt;/span>--minify&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="k">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Deploy&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>peaceiris/actions-gh-pages@v3&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">deploy_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>${{&lt;span class="w"> &lt;/span>secrets.ACTIONS_DEPLOY_KEY&lt;span class="w"> &lt;/span>}}&lt;span class="w"> &lt;/span>&lt;span class="c">#这里在repo settings里填入SSH私钥&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">external_repository&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>xxxxxxxx/xxxxxxxx.github.io&lt;span class="w"> &lt;/span>&lt;span class="c"># &amp;lt;- 改成自己的 user github page&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>./public&lt;span class="w"> &lt;/span>&lt;span class="c"># &amp;lt;- 指定成品放置文件夹&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>master&lt;span class="w"> &lt;/span>&lt;span class="c"># &amp;lt;- 远端repo目标分支&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>随后即可等待自动远端生成站点。&lt;/p>
&lt;h2 id="github-desktop">Github Desktop&lt;/h2>
&lt;p>对于我这样几乎无Coding基础的用户来说，为了更进一步少敲代码，除了自己写一个批处理文件，也可以应用Github Desktop进行处理。桌面版在&lt;a href="https://desktop.github.com/">这里下载&lt;/a>，在&lt;code>pull&lt;/code>后即可进行&lt;code>commit&lt;/code>和&lt;code>push&lt;/code>操作。唯一需要注意的是，如果之前就用的SSH连接，且仅在WSL内生成过SSH KEY，在Windows下需要再进行一次操作以保证能勾顺利&lt;code>git push&lt;/code>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>所以说犯懒是推动发明进步的第一生产力（迫真）&lt;/p>
&lt;p>目前是通过Hugo部署在Github Pages上，套了一层Cloudflare CDN，并利用Github Action完成自动化部署；本地则通过Github Desktop简化上传操作。&lt;/p>
&lt;p>折腾到现在应该基本达成顺利、顺畅写博客的目的了。&lt;del>总感觉有点本末倒置了啊喂&lt;/del>&lt;/p>
&lt;p>&lt;a href="https://github.com/aozaki-kuro/aozaki-kuro.com/actions">&lt;img src="https://github.com/aozaki-kuro/aozaki-kuro.com/workflows/Hugo%20Build%20and%20Deploy/badge.svg" alt="Built on GitHub">&lt;/a>&lt;/p></content><category scheme="https://aozaki-kuro.com/tech/" term="tech" label="tech"/><category scheme="https://aozaki-kuro.com/tags/%E6%8A%98%E8%85%BE/" term="折腾" label="折腾"/><category scheme="https://aozaki-kuro.com/tags/%E7%BD%91%E7%BB%9C/" term="网络" label="网络"/></entry><entry><title type="text">Hugo部署与踩坑记</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/"/><id>https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-09T11:29:51+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">本博客部署于Github Pages上，最初构建时应用的Hexo。在被Node.js的……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/0001.jpg" alt="">&lt;/p>
&lt;p>本博客部署于Github Pages上，最初构建时应用的Hexo。在被Node.js的巨量依赖和最终页面生成速度面前决定迁移至Hugo。Hugo部署的坑很多，故保留完整操作与相关踩坑记录。😫&lt;/p>
&lt;hr>
&lt;h2 id="wsl2的部署">WSL2的部署&lt;/h2>
&lt;p>在反复折腾几轮后遂决定 &lt;del>滚回Hexo方案&lt;/del> 在WSL下Hexo的生成速度面前我又滚回来了。&lt;/p>
&lt;p>以下为操作笔记：&lt;/p>
&lt;h3 id="windows-10内启用相关功能">Windows 10内启用相关功能&lt;/h3>
&lt;p>首先确保Windows 10版本在18917以上，Store内安装Ubuntu后开始WSL2的配置。&lt;sup id="fnref:1">&lt;a href="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>以管理员权限运行Powershell，并启用虚拟机平台可选组件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="nb">Enable-WindowsOptionalFeature&lt;/span> &lt;span class="n">-Online&lt;/span> &lt;span class="n">-FeatureName&lt;/span> &lt;span class="n">VirtualMachinePlatform&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启用Linux子系统功能&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="nb">Enable-WindowsOptionalFeature&lt;/span> &lt;span class="n">-Online&lt;/span> &lt;span class="n">-FeatureName&lt;/span> &lt;span class="n">Microsoft-Windows-Subsystem-Linux&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>重启后&lt;/strong>打开安装的Ubuntu子系统，输入用户名密码，完成WSL1的安装；此时在Powershell内输入&lt;code>wsl -l&lt;/code>可查看安装的版本号（我所安装的是Ubuntu 18.04 LTS，则显示&lt;code>Ubuntu-18.04&lt;/code>）。&lt;/p>
&lt;h3 id="转换为wsl2">转换为WSL2&lt;/h3>
&lt;p>首先至Microsoft下载&lt;a href="https://docs.microsoft.com/zh-cn/windows/wsl/wsl2-kernel">Linux Kernel&lt;/a>，安装后方可进行转换。&lt;/p>
&lt;p>根据&lt;code>wsl -l&lt;/code>获得的版本号，将其转换为WSL2。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="n">wsl&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-set-version&lt;/span> &lt;span class="n">Ubuntu&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="n">18&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">04&lt;/span> &lt;span class="n">2&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后可以输入&lt;code>wsl --set-default-version 2&lt;/code>，使之后安装的Linux子系统都安装到WSL2中。&lt;/p>
&lt;p>至此WSL2的部署完成。&lt;/p>
&lt;hr>
&lt;h2 id="hugo">Hugo&lt;/h2>
&lt;h3 id="wsl2内部署hugo">WSL2内部署Hugo&lt;/h3>
&lt;p>对于老手应该问题不大，我还是记录一下新手的操作防止自己忘记……&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="nb">cd&lt;/span> /tmp
wget https://github.com/gohugoio/hugo/releases/download/v0.74.3/hugo_extended_0.74.3_Linux-64bit.tar.gz
tar xvf hugo_extended_0.74.3_Linux-64bit.tar.gz
sudo mv hugo /usr/local/bin
hugo
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此处要注意，虽然WSL2是64位的，但好像只能运行32位的程序（未确证）。&lt;/p>
&lt;h3 id="hugo相关操作">Hugo相关操作&lt;/h3>
&lt;h4 id="创建博客与添加新文章">创建博客与添加新文章&lt;/h4>
&lt;p>如下命令创建博客&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">hugo new site blog &lt;span class="c1">#这里填入自己的博客根目录名称&lt;/span>
&lt;span class="nb">cd&lt;/span> blog
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新增主题（这里应用的是MemE）&lt;sup id="fnref:2">&lt;a href="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">git init
git submodule add --depth &lt;span class="m">1&lt;/span> https://github.com/reuixiy/hugo-theme-meme.git themes/meme
rm config.toml &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> cp themes/meme/config-examples/zh-cn/config.toml config.toml &lt;span class="c1">#将config.toml替换为主题用&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新建文章与关于页面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">hugo new &lt;span class="s2">&amp;#34;tech/hello-world.md&amp;#34;&lt;/span>
hugo new &lt;span class="s2">&amp;#34;about/_index.md&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行本地渲染，进行预览&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">hugo server -D
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="连接至ssh">连接至SSH&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">ssh-keygen -tecdsa &lt;span class="c1">#创建sshkey，可以看到一个谜之ASCII图片&lt;/span>
cat ~/.ssh/id_ecdsa.pub &lt;span class="c1">#查看公钥，复制后添加至Github&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="推送更新">推送更新&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">git remote set-url origin git@github.com:xxxxxxx &lt;span class="c1">#此处修改为自己项目主页的ssh地址&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在添加过origin后如下操作：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sh" data-lang="sh">hugo --gc --minify &lt;span class="c1">#这里在博客根目录下执行&lt;/span>
&lt;span class="nb">cd&lt;/span> public
git add .
git status
git commit -m &lt;span class="s2">&amp;#34;Update&amp;#34;&lt;/span> &lt;span class="c1">#根据需要填写更新名称&lt;/span>
git push
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果博客出现渲染问题，可以改用&lt;code>hugo --gc -e production --cleanDestinationDir&lt;/code>进行重构。&lt;/p>
&lt;h2 id="部署cloudflare-cdn">部署Cloudflare CDN&lt;/h2>
&lt;p>由于国内CDN均要求备案，粗略看了看备案的冗长过程并想到要在博客底下挂一个&lt;del>又长又丑的&lt;/del>备案号，加之DNSpod的解析服务突然出错（DNSpod你自己说你是第几次了），便下定决心迁移至Cloudflare的&lt;del>降速&lt;/del>CDN上。&lt;/p>
&lt;h3 id="为何选择cloudflare">为何选择Cloudflare？&lt;/h3>
&lt;p>原因很简单，Cloudflare的CDN遍布全世界，并且提供号称全球最快的DNS &lt;code>1.1.1.1&lt;/code>、免费的SSL证书，以及号称几乎打不死的DDoS保护，而且最重要的是不需要备案🤣 近期还听说Cloudflare在内地与百度有合作，部署了大量节点，想必访问速度应该是差不到哪里去……吧。&lt;/p>
&lt;p>配置过程不详述了，我主要参考的是&lt;a href="https://mogeko.me/2019/056/">Mogeko的Cloudflare CDN添加教程&lt;/a>。&lt;/p>
&lt;p>部署后的踩坑记录更新在后面。&lt;/p>
&lt;hr>
&lt;h2 id="踩坑记">踩坑记&lt;/h2>
&lt;h3 id="css错误的排查">CSS错误的排查&lt;/h3>
&lt;p>最开始听说Hugo轻量化且不需要那么多依赖，于是便想着往Hugo迁移。当然折腾上手后才发现踩坑的点太多了。&lt;/p>
&lt;p>首先部署在Windows 10下，未使用WSL时，遇到了本地&lt;code>hugo server -D&lt;/code>预览正常，&lt;code>git push&lt;/code>后页面出错的问题。排查几次后发现报错如下：&lt;/p>
&lt;pre>&lt;code>Failed to find a valid digest in the 'integrity' attribute for resource 'xxxxxxx.css' with computed SHA-256 integrity. The resource has been blocked.
&lt;/code>&lt;/pre>&lt;p>查了多方资料后发现有怀疑CRLF/LF的问题，也有说可以把&lt;code>integrity&lt;/code>属性删除即正常的。但是根据相关指引执行后均没有效果。&lt;/p>
&lt;p>此外，老马在Manjaro下生成的网页&lt;code>git push&lt;/code>后是正常的，可以正常加载CSS，Windows下无论通过&lt;code>Powershell&lt;/code>还是&lt;code>Git bash&lt;/code>窗口执行都不正常。问题排查困难重重，暂时断了迁移至Hugo的念想。&lt;/p>
&lt;p>一直到昨天，尝试性地部署了&lt;code>WSL2&lt;/code>，最终编译才通过，让CSS能够正常加载。&lt;/p>
&lt;h3 id="大小写的识别">大小写的识别&lt;/h3>
&lt;p>昨天在成功通过Hugo部署后发现了问题：首页可以加载文章，但点进Read More后404。&lt;/p>
&lt;p>进行多次排查后发现是文章所在文件夹的大小写问题，这一问题在Hexo下未发生，将所有文件改为小写后加载正常。&lt;/p>
&lt;h3 id="部署操作麻烦">部署操作麻烦&lt;/h3>
&lt;p>除了难以排查的CSS问题和大小写识别的坑，由于我的coding基础薄弱，Hugo部署时的命令行数量也让我头疼。不仅难记且涉及根目录及&lt;code>public/&lt;/code>两个目录层级。而Hexo则只需要优雅地输入&lt;code>hexo g &amp;amp;&amp;amp; hexo d&lt;/code>即可完成在服务端的部署。&lt;/p>
&lt;h3 id="cloudflare-cdn部署时的注意事项">Cloudflare CDN部署时的注意事项&lt;/h3>
&lt;p>由前面的踩坑经验可知，Hugo生成的CSS需要检查完整性，所以尽管Cloudflare提供了Auto Minify功能，但是请千万不要去勾选HTML以外的选项。Auto Minify会导致出现前述的CSS完整性错误，进而使得网页无法加载CSS样式。&lt;/p>
&lt;hr>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Hugo尽管只需要下载一个二进制文件即可开始部署和使用，但是在这过程中碰到的坑和解决问题的难度远超Hexo。如果我想不起来用WSL，那可能就完全和Hugo无缘。&lt;/p>
&lt;p>这方面不得不说Hexo的功能性强得多，编译时自动转换CRLF/LF，并且不受到大小写的影响。除了在WSL下生成网页时真的很慢……&lt;/p>
&lt;p>看在Hugo有MemE这个颜值高、简洁还不容易撞车的主题面上饶了你了。&lt;/p>
&lt;p>另外题图来自赤井はあと，回顾整个排查过程确实非常生草 &lt;del>以及哭笑不得&lt;/del> 。&lt;/p>
&lt;br>
&lt;div align=center>
&lt;blockquote class="twitter-tweet">&lt;p lang="ja" dir="ltr">フリー素材にどうぞ &lt;a href="https://t.co/Lq8ozvG1Ti">pic.twitter.com/Lq8ozvG1Ti&lt;/a>&lt;/p>&amp;mdash; 赤井はあと❤最強アイドル (@akaihaato) &lt;a href="https://twitter.com/akaihaato/status/1285460148958277633?ref_src=twsrc%5Etfw">July 21, 2020&lt;/a>&lt;/blockquote> &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script>
&lt;/div>
&lt;hr>
&lt;p>当然尽管折腾了那么多，建立博客的初衷还是写点东西下来你说是不是。&lt;/p>
&lt;p>好好写点东西下来吧………………🤯&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>具体请参照《适用于Linux的Windows子系统安装指南》：https://docs.microsoft.com/zh-cn/windows/wsl/install-win10 &lt;a href="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>更多操作及详情，请查看MemE项目主页：https://github.com/reuixiy/hugo-theme-meme/blob/master/README.zh-cn.md &lt;a href="https://aozaki-kuro.com/tech/2020-08-09-troubled-hugo/#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></content><category scheme="https://aozaki-kuro.com/tech/" term="tech" label="tech"/><category scheme="https://aozaki-kuro.com/tags/%E6%8A%98%E8%85%BE/" term="折腾" label="折腾"/><category scheme="https://aozaki-kuro.com/tags/%E7%BD%91%E7%BB%9C/" term="网络" label="网络"/></entry><entry><title type="text">毕业了</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/life/2020-08-07-master-graduation/"/><id>https://aozaki-kuro.com/life/2020-08-07-master-graduation/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-07T21:18:14+00:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-07-master-graduation/0001.jpg" alt="">&lt;/p>
&lt;p>总算是毕业了，怎么说呢，准备好从一个火坑到一个火坑。&lt;/p>……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-07-master-graduation/0001.jpg" alt="">&lt;/p>
&lt;p>总算是毕业了，怎么说呢，准备好从一个火坑到一个火坑。&lt;/p>
&lt;h2 id="漫长的轮转">漫长的轮转&lt;/h2>
&lt;p>2017年到2020年一直在临床上轮转，某三甲医院的轮转计划是真的狠，从2017年8月1日到2020年7月31日用了个彻底，市里规定33个月的轮转硬给扩展到了36个月。&lt;/p>
&lt;p>算了算各个科室轮转月数，心脏内科（5）、呼吸科（4）、消化科（4）、肾脏内科（2）、内分泌科（2）、麻醉科（2）、急诊科（2+1）、感染科（2）、风湿免疫科（2）、神经内科（2）、高血压科（2）、精神科（2）、血液科（2）、影像科（2）。&lt;/p>
&lt;p>当然所有临床学的技能、学的知识全靠自己，哪来的老师给你一个个讲过去呢（苦笑）。倒是在很多同学抱怨单调、太累的麻醉科学到了很多东西。除了前两周在普外科房间做麻醉以外，剩下时间都在心外科麻醉台面工作，学习了气管插管、有创动脉监测、深静脉置管、右心漂浮导管置管、固定呼吸机及转运呼吸机的使用、大抢救，等等等等。以至于后面一个科室到ICU时被主任询问是否是外科出身，对不起，我是一个曾经想做外科的心内科医生……&lt;/p>
&lt;h2 id="疫情">疫情&lt;/h2>
&lt;p>今年年初还遇上了新冠疫情，要不是疫情最严重2月到3月窝在一个闲得要死的科室把毕业论文写完了，真不知道拿什么来毕业。当时在神经内科等等科室，因为回乡的轮转医生回不来，实习学生和进修医生无法来沪，于是我们这些最后坚守的轮转医生们每3-4日就是一个值班，忙得非常刻骨铭心了。&lt;/p>
&lt;p>还有支援门急诊时都需要穿戴非常厚重的防护服，这对于我一个容易出汗的人来说简直是灾难，每天脱下来的衣服里全都是水。加之中央空调不能开，于是就得在寒冷和湿透了的内层之间挣扎…………&lt;/p>
&lt;p>希望疫情能尽早结束。&lt;/p>
&lt;h2 id="挺多破事">挺多破事&lt;/h2>
&lt;p>轮转期间当然接触的最多的还是病人，现在医患关系那么紧张，挑一个讲讲吧。&lt;/p>
&lt;p>当时在北院急诊台面轮转，从分诊台送来一个中年男性病人（以及好几个家属）。家属张口就是要给病人吸痰。&lt;/p>
&lt;p>观察患者捂胸口，大汗淋漓，有咳嗽，呼吸急促，但尚不能确定问题所在。遂嘱平卧至检查床上，测量生命体征。单侧血压86/45 mmHg，对侧122/74 mmHg，四肢厥冷，单侧脉搏细弱，对侧脉搏搏动尚有力。考虑大动脉栓塞或主动脉夹层。&lt;/p>
&lt;p>追问患者家属既往是否有心梗、主动脉夹层或相关血管疾病，患者家属&lt;strong>矢口否认&lt;/strong>。翻阅门诊病历卡后发现2月前于外院确诊“主动脉夹层”，当时送入心脏外科监护室，由于当时检查考虑DeBakey II/Stanford A型，死亡率极高，建议手术。出于经济原因，患者要求回当地诊治（手术和监护费用粗算约20-40万不等，手术风险也非常高）。谁知患者仍然在沪工作，未回当地手术治疗。&lt;/p>
&lt;p>当然要拖去做个CT，考虑到患者病情危重，生命体征不稳，于是没有做增强。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-07-master-graduation/0003.jpg" alt="">&lt;/p>
&lt;p>如图所示，蓝色箭头为主动脉夹层形成的假腔，由于病程长达2月，夹层已经可见钙化，无需造影剂也可以看见假腔。红色箭头是主动脉夹层破口，同样由于病程长达2月，加之血管条件差，破口反而并不是很大，但已经在往胸腔内出血了。单侧胸腔容积2500mL，人的全身血量也不过4000mL上下，可以解释为何又大汗淋漓及四肢厥冷的外周循环衰竭征象。&lt;/p>
&lt;p>北院由于没有能力进行急诊心外科体外循环手术，告知患者家属病情危重及无法在北院进行手术后，决定签字后转院回当时确诊的医院。&lt;/p>
&lt;h2 id="顺利毕业">顺利毕业&lt;/h2>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-07-master-graduation/0002.jpg" alt="">&lt;/p>
&lt;p>尽管有诸多的不如意和心惊胆战的时刻，总算还是完成了3年的轮转，拿到了学位证、学历证、医师执照、轮转证，顺利达成四证合一的目标。还努力考上了博士，集齐了三张入学通知书。&lt;/p>
&lt;p>接下来就是面对博士生涯，还有今后的职业规划了。&lt;/p>
&lt;p>……一个火坑到另一个火坑，希望博士能顺利完成吧。&lt;/p></content><category scheme="https://aozaki-kuro.com/life/" term="life" label="life"/><category scheme="https://aozaki-kuro.com/tags/%E9%9A%8F%E7%AC%94/" term="随笔" label="随笔"/></entry><entry><title type="text">新博客的折腾与迷思</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/life/2020-08-05-why-blogging/"/><id>https://aozaki-kuro.com/life/2020-08-05-why-blogging/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-05T15:55:19+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-05-why-blogging/0001.jpg" alt="">&lt;/p>
&lt;p>虽然说昨天就已经顺利建立了Hexo + NexT的博客，并且好不容易动手写完了久违的一篇博客，并且想写下一点点迷思。&lt;/p>……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-05-why-blogging/0001.jpg" alt="">&lt;/p>
&lt;p>虽然说昨天就已经顺利建立了Hexo + NexT的博客，并且好不容易动手写完了久违的一篇博客，并且想写下一点点迷思。&lt;/p>
&lt;h2 id="折腾">折腾&lt;/h2>
&lt;p>先说折腾吧。因为先前看到了Github Pages可以托管博客，于是在各种因素之下动心，然后间断拖了半个月把博客搭起来了。&lt;/p>
&lt;p>一开始选择的Hexo，并且选了最大路的NexT主题（功能相当完善），不过在nodejs那巨大的modules面前非常头疼。查了资料后决定转投Hugo，并且在&lt;a href="https://io-oi.me/">reuixiy大佬&lt;/a>的博客发现了MemE这款主题（&lt;a href="https://github.com/reuixiy/hugo-theme-meme">github项目地址&lt;/a>），觉得Hugo轻量化且主题具备我所需要的功能，便在老马的指导下再次折腾了一下午。&lt;/p>
&lt;p>于是新的博客就这么建好了。&lt;/p>
&lt;p>08-05 22:40 更新：由于Hugo的奇怪Bug，导致部署后出现各种奇怪的css相关问题，且排查起来毫无头绪，遂决定暂时滚回到Hexo方案。&lt;/p>
&lt;p>08-08 16:30 更新：通过WSL2解决了Hugo的部署问题，记录了一下相关踩坑记录。&lt;/p>
&lt;h2 id="博客迷思">博客迷思&lt;/h2>
&lt;p>其实很久以前就用过博客（fc2、Wordpress、新浪博客 etc.），后来也经营过Lofter，不过除了Lofter以外都不算长久。fc2和Wordpress先后被墙，曾经用GoAgent、红杏等等想办法上去，但是最终因为线路问题难以为继。此外当时是高中，很难有时间持续写博客。即便是大学后开始经营的Lofter也遇到了很多麻烦。最初Lofter在Evan设想下是作为高品位的摄影社区推出的，后来因为Evan调走，新的社区运营把Lofter变成了二次元同人社区，原来的摄影社区氛围无以为继，便纷纷退出了。&lt;/p>
&lt;p>顺带当时所在的摄影社团叫Chihato，主要组成人员实际上都是专业的摄影师。我这样玩票的进去也是非常意外了。&lt;/p>
&lt;p>在SNS时代来临后自然是选择了Twitter、Google+、微博、微信朋友圈等进行记录。不必说，对于简体中文内容，大陆的平台看的人最多，传播力最广，作为代价，内容审查是逃不过去的，很多内容不敢也不能发布在国内平台上。而近几年来又要面对全新的一些问题：举报行为盛行。目前作为主流的低龄、低学历网民&lt;sup id="fnref:1">&lt;a href="https://aozaki-kuro.com/life/2020-08-05-why-blogging/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>看到不喜欢的内容都要一律举报让它消失。这个习惯的来源牵涉到方方面面，个人层面的党同伐异，以及平台的自我阉割、纵容和推波助澜当然是不可少的要素。&lt;/p>
&lt;p>很多网民觉得出了微博就是避风港了，其实并不然，内容审查的问题只要是国内的注册公司都是跑不掉的。Lofter也吃下了当年自己种的恶果，目前大量同人作品遭到举报，并且审核力度加大，很多并无出格性描写的文章和图画遭到删除或屏蔽。当年我们都喜欢骂广电总局太过敏感，从人物发色、耳钉唇钉，一直管到意识形态，并且觉得在新一代成长后可以改善这样的问题。现在觉得完全就是想多了——&lt;strong>我们的下一代比我们的上两代还要狠心&lt;/strong>。&lt;/p>
&lt;p>鉴于目前国内的环境只会越来越差，文艺创作的空间也只会越来越小，自建博客可能是唯一的出路。所以自建博客的需求又回来了——把内容托管到国外VPS/Github Pages上，用轻量化傻瓜化的框架搭建博客，并且可以选择加密博客。最大的风险也就是域名被封。&lt;/p>
&lt;p>然而就我这两天的折腾经验，Github Pages托管、Hexo/Hugo的部署与调整都是具有门槛的，都需要基本的coding能力，或者需要一位热心的程序员朋友，因此在推广上也产生了难度。&lt;/p>
&lt;p>但无论如何，人类还是需要书写，需要创作的，希望大家都能找到合适的、安心的写作平台。&lt;/p>
&lt;h2 id="共勉">共勉&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>我看见山和大海，也看见潮起潮落。&lt;br>而你只能看见屋内的风景，感叹窗外的美好。&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>网民年龄及学历结构，占比最大的群体分别是“15-19岁”以及“初中学历”，详见第45次《中国互联网络发展状况统计报告》：http://www.cac.gov.cn/2020-04/27/c_1589535470378587.htm &lt;a href="https://aozaki-kuro.com/life/2020-08-05-why-blogging/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></content><category scheme="https://aozaki-kuro.com/life/" term="life" label="life"/><category scheme="https://aozaki-kuro.com/tags/%E9%9A%8F%E7%AC%94/" term="随笔" label="随笔"/></entry><entry><title type="text">《对马岛之鬼》白金后简评</title><link rel="alternate" type="text/html" href="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/"/><id>https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/</id><updated>2020-08-12T13:21:15+00:00</updated><published>2020-08-04T20:51:02+08:00</published><author><name>Aozaki Kuro</name><uri>https://aozaki-kuro.com/</uri><email>Aozaki.Kuro@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0004.jpg" alt="">&lt;/p>
&lt;p>终于是花了两三周时间把 &lt;del>对蒙忍&lt;/del> 对马岛之鬼白金了。总体非常满意游戏的质量，而且本作可谓是PS4末期的诚意之作，觉得还是有必要稍稍简评。&lt;/p>……</summary><content type="html">&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0004.jpg" alt="">&lt;/p>
&lt;p>终于是花了两三周时间把 &lt;del>对蒙忍&lt;/del> 对马岛之鬼白金了。总体非常满意游戏的质量，而且本作可谓是PS4末期的诚意之作，觉得还是有必要稍稍简评。&lt;/p>
&lt;h2 id="总体评分9分">总体评分：9分&lt;/h2>
&lt;h3 id="剧情75分">剧情：7.5分&lt;/h3>
&lt;p>个人认为不功不过，叙事完整，起承转合都可以接受 &lt;del>至少不会没由头地对着重要人物来一发高尔夫球棒&lt;/del>。从武士到战鬼的缘由、坚持战鬼之道及其后果，都讲得算是比较明确了。简要总结一下就是“一个理想主义者的死亡”，也侧面了反映骑士精神/武士道为何在火枪火炮面前毫无还手之力。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0002.jpg" alt="鲁莽武士">&lt;/p>
&lt;p>当然，剧情一股育碧味儿，查阅资料后发现确实是几位从育碧跳槽出来的编剧写的……&lt;/p>
&lt;p>还有，主线剧情的演出非常精彩，这点后面讲。&lt;/p>
&lt;h3 id="演出9分">演出：9分&lt;/h3>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0019.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0020.jpg" alt="">&lt;/p>
&lt;p>这应该是本作最突出的特点了。从一开始就有选项选择黑泽明模式（高对比黑白+噪点），致敬大师和经典武士电影。从主线剧情人物的动作及表情，决斗前拔刀的镜头 &lt;del>还挺西部片的&lt;/del>，再到每个故事开头的定格镜头，总的来说运镜水平以及画质渲染足以暴打大部分游戏了。牛逼疯了。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0011.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0013.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0015.jpg" alt="">&lt;/p>
&lt;p>如果想要完整体验GoT的画质和运镜水平，建议用PS4 Pro+4K HDR显示器/电脑玩 &lt;del>或者等上PC体验极致画质&lt;/del>。我只有初代PS4，只能输出1080p，比较可惜。&lt;/p>
&lt;h3 id="操作7分">操作：7分&lt;/h3>
&lt;p>操作应该时本游戏的短板，很多细节差点毁掉这款游戏。这并不是说笑，开门时过于贴近导致无法按R2开门、连续暗杀时因为前冲了一步导致判定为重攻击、骑马时对敌方的会心一击难以触发，还有攀登神社时绳钩经常勾不到……这些小毛小病导致在整个Gameplay过程中充满了各种各样的不爽感，如果不是杀阵演出真的很爽很流畅，那我可能会半路弃坑了。&lt;/p>
&lt;p>在决斗时，挥刀的手感还算是不错的，弹反的判定在装了水神护符后松了很多，然而非常奇怪的是我几乎没用出过完美闪避，经常就变成滚地了……可能还需要多练习吧，普通难度通关基本靠弹反。&lt;/p>
&lt;h3 id="地图与探索8分">地图与探索：8分&lt;/h3>
&lt;p>地图分为三个部分，随着收复主要城池开放，没有特别安排空气墙而是编排好地形来阻挡探索。狐狸巢、神社、温泉的分布总体比较合理，几个探索点之间的距离不会太夸张。此外在野外营救到被绑的百姓会逐渐把蒙古据点和占领的镇子标出来，在完成主线前就可以把大部分地图开完。&lt;/p>
&lt;p>支线任务很多也是从流民营地对话接到的，而且据说是就近刷的，这样的机制也是挺不错的，至少揍到哪儿基本就可以探索到哪儿。&lt;/p>
&lt;p>唯一比较不满的是探索收益偏低了一些，大部分都是给的资源；任务给的护符大部分都是重复的，仅有稻荷神社的两个护符可以随着探索增长。&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0023.jpg" alt="">&lt;/p>
&lt;h2 id="部分截图展示">部分截图展示&lt;/h2>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0005.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0006.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0007.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0008.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0009.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0027.jpg" alt="">&lt;/p>
&lt;p>&lt;img src="https://aozaki-kuro.com/life/2020-08-04-ghost-of-tsushima/0030.jpg" alt="">&lt;/p>
&lt;h2 id="鸣谢">鸣谢&lt;/h2>
&lt;p>感谢老马 (&lt;a href="https://twitter.com/bgm38">twitter: @bgm38&lt;/a>) 全程协助帮忙搭起这个小博客！&lt;/p>
&lt;p>另，本博客思考再三后决定不开放评论功能，如有疑问请&lt;a href="mailto:aozaki.kuro@gmail.com">邮件联系&lt;/a>。&lt;/p></content><category scheme="https://aozaki-kuro.com/life/" term="life" label="life"/><category scheme="https://aozaki-kuro.com/tags/ps4/" term="PS4" label="PS4"/><category scheme="https://aozaki-kuro.com/tags/%E6%B8%B8%E6%88%8F/" term="游戏" label="游戏"/></entry></feed>